<UserControl x:Name="TraceType2_Control" x:Class="wpfGMTraceability.UserControls.TraceType2Control"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:wpfGMTraceability.UserControls"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:local2="clr-namespace:wpfGMTraceability.Helpers"
             mc:Ignorable="d" d:DesignHeight="720" d:DesignWidth="1280" Loaded="TraceType2_Control_Loaded" Unloaded="TraceType2_Control_Unloaded">
    <Grid Background="Gainsboro">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="2" />
            <RowDefinition Height="80" />
            <RowDefinition Height="75" />
            <RowDefinition Height="25" />
            <RowDefinition Height="80" />
            <RowDefinition Height="80" />
            <RowDefinition Height="80" />
            <RowDefinition Height="80" />
            <RowDefinition Height="80" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="5">
            <!-- **** PartNumber Harness + LeadCode + JulianDay **** -->
            <materialDesign:Card x:Name="cardPNLeadJulianDay"  materialDesign:ElevationAssist.Elevation="Dp8" UniformCornerRadius="8" BorderThickness="2" Margin="18 5 5 5" BorderBrush="Navy" 
                     Width="auto" Height="auto" Background="Blue">
                <StackPanel Orientation="Horizontal">
                    <materialDesign:PackIcon Width="32" Height="32" Kind="CarShiftPattern" Foreground="Gray" VerticalAlignment="Center" />
                    <TextBlock x:Name="txtScanCode" FontWeight="SemiBold" FontSize="40" Foreground="White" Text="" Margin="2 0 0 0" />
                </StackPanel>
            </materialDesign:Card>
        </StackPanel>

        <TextBlock x:Name="txtLastScan" Text="..." Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="3" FontSize="18" Foreground="Gray" VerticalAlignment="Center" FontWeight="Normal" Margin="18 0" />

        <!-- **** Video Button **** -->
        <Button x:Name="BtnPlayVideo" Style="{StaticResource MaterialDesignFloatingActionButton}" Height="75" Width="75" BorderBrush="{x:Null}" Background="Gray" Grid.Column="4" Grid.Row="2" Margin="0 0 25 0" Foreground="White" 
HorizontalAlignment="Right" VerticalAlignment="Center" Click="BtnPlayVideo_Click">
            <StackPanel Orientation="Vertical">
                <materialDesign:PackIcon Kind="Play" Width="46" Height="46" Foreground="LimeGreen" HorizontalAlignment="Center"/>
                <TextBlock FontWeight="SemiBold" FontSize="16" Text="Video" Margin="0 -5 0 0"/>
            </StackPanel>
        </Button>

        <materialDesign:Card Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" Grid.RowSpan="4" Padding="4" Margin="10" UniformCornerRadius="6">
            <DataGrid x:Name="dgParts" AutoGenerateColumns="False" ItemsSource="{Binding}" IsReadOnly="True" FontSize="14" FontFamily="Segoe UI" HorizontalAlignment="Stretch" VerticalAlignment="Top"
                        RowHeaderWidth="0" HeadersVisibility="Column" GridLinesVisibility="All" materialDesign:DataGridAssist.CellPadding="8" materialDesign:DataGridAssist.ColumnHeaderPadding="12"
                        RowDetailsVisibilityMode="VisibleWhenSelected" SelectionMode="Single" Background="Transparent" MouseLeftButtonUp="dgParts_MouseLeftButtonUp">
                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="#FF007ACC" />
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="FontWeight" Value="Bold" />
                        <Setter Property="BorderBrush" Value="DarkGray" />
                        <Setter Property="BorderThickness" Value="0,0,1,0" />
                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                        <Setter Property="Height" Value="32" />
                        <Setter Property="Padding" Value="8" />
                    </Style>
                </DataGrid.Resources>
                <DataGrid.RowDetailsTemplate>
                    <DataTemplate>
                        <Border Background="#F5F5F5" Padding="8" Margin="4">
                            <ItemsControl ItemsSource="{Binding Boxes}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" Margin="4" Background="Aqua">
                                            <TextBlock Text="{Binding BoxNumber}" FontWeight="Bold" Margin="4"/>
                                            <TextBlock Text="{Binding BoxQt}" Margin="4"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Border>
                    </DataTemplate>
                </DataGrid.RowDetailsTemplate>
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Parte" Binding="{Binding BomPart}" />
                    <DataGridTextColumn Header="Cantidad por pieza" Binding="{Binding bom_quantity_per_piece}" />
                    <DataGridTextColumn Header="Disponible" Binding="{Binding total_available}" />
                    <DataGridCheckBoxColumn Header="Suficiente" Binding="{Binding Sufficient}" />
                </DataGrid.Columns>
            </DataGrid>
        </materialDesign:Card>

        <ListBox x:Name="lbLog" Grid.ColumnSpan="2" Grid.Row="7" Grid.Column="0" MaxHeight="300" VerticalAlignment="Bottom" ScrollViewer.VerticalScrollBarVisibility="Auto" BorderThickness="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <DockPanel Margin="2" LastChildFill="True">
                        <materialDesign:PackIcon Kind="{Binding MsjType, Converter={StaticResource TypeToIconConverter}}" Width="20" Height="20" Margin="0,0,6,0" />
                        <Border Padding="6" CornerRadius="4" Background="{Binding MsjType, Converter={StaticResource TypeToColorConverter}}">
                            <TextBlock Text="{Binding Formatted}" Foreground="Gray" FontSize="14" />
                        </Border>
                    </DockPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Image Grid.Row="9" Grid.Column="4" Margin="0 0 10 0" Source="/Resources/LogoWithName.png" VerticalAlignment="Bottom" HorizontalAlignment="Right" />

    </Grid>
</UserControl>
